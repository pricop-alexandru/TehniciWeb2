<!DOCTYPE html>
<html lang="en">
<head>
    <%- include('../partials/head', {title: 'Shop - OnlyMerch'}) %>
</head>
<body>
    <%- include('../partials/header') %>
    <main class="container-fluid">
        <div class="row">
            <div class="col-12">
                <h1 class="text-center mb-4">Shop</h1>
            </div>
        </div>
        
        <!-- Filters Section -->
        <div class="row mb-4">
            <div class="col-12">
                <div class="card">
                    <div class="card-body">
                        <div class="row g-3">
                            <!-- Product Name Search -->
                            <div class="col-md-6 col-lg-3">
                                <label for="productName" class="form-label">Product Name</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-search"></i></span>
                                    <input type="text" class="form-control" id="productName" placeholder="Search products...">
                                </div>
                            </div>
                            
                            <!-- Price Range -->
                            <div class="col-md-6 col-lg-3">
                                <label for="priceRange" class="form-label">Price Range: $<span id="priceValue">49.99</span></label>
                                <input type="range" class="form-range" id="priceRange" min="19.99" max="49.99" step="0.01" value="49.99">
                                <div class="d-flex justify-content-between">
                                    <small class="text-muted">$19.99</small>
                                    <small class="text-muted">Max: $49.99</small>
                                </div>
                            </div>
                            
                            <!-- Style Selection -->
                            <div class="col-md-6 col-lg-3">
                                <label class="form-label">Style</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="bi bi-palette"></i></span>
                                    <select class="form-select" id="styleSelect">
                                        <option value="">All Styles</option>
                                        <option value="DARK">Dark</option>
                                        <option value="WHITE">White</option>
                                    </select>
                                </div>
                            </div>
                            
                            <!-- Category Toggle Buttons -->
                            <div class="col-md-6 col-lg-3">
                                <label class="form-label">Category</label>
                                <div class="btn-group w-100" role="group" aria-label="Category selection">
                                    <input type="radio" class="btn-check" name="category" id="allCategories" value="" checked>
                                    <label class="btn btn-outline-primary" for="allCategories">
                                        <i class="bi bi-grid d-md-none"></i>
                                        <span class="d-none d-md-inline">All Categories</span>
                                    </label>
                                    
                                    <input type="radio" class="btn-check" name="category" id="tshirts" value="TSHIRT">
                                    <label class="btn btn-outline-primary" for="tshirts">
                                        <i class="bi bi-person d-md-none"></i>
                                        <span class="d-none d-md-inline">T-Shirts</span>
                                    </label>
                                    
                                    <input type="radio" class="btn-check" name="category" id="hoodies" value="HOODIE">
                                    <label class="btn btn-outline-primary" for="hoodies">
                                        <i class="bi bi-snow d-md-none"></i>
                                        <span class="d-none d-md-inline">Hoodies</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Tags Filter -->
                        <div class="row g-3 mt-2">
                            <div class="col-12">
                                <label class="form-label">Tags Filter</label>
                                <div class="row">
                                    <div class="col-md-6 col-lg-3">
                                        <div class="btn-group w-100" role="group">
                                            <input type="checkbox" class="btn-check" id="darkHumor">
                                            <label class="btn btn-outline-secondary" for="darkHumor">
                                                <i class="bi bi-emoji-laughing d-md-none"></i>
                                                <span class="d-none d-md-inline">dark humor</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="darkHumorToggle" id="darkHumorAre" checked>
                                            <label class="btn btn-outline-success" for="darkHumorAre">
                                                <i class="bi bi-check d-md-none"></i>
                                                <span class="d-none d-md-inline">are</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="darkHumorToggle" id="darkHumorNuAre">
                                            <label class="btn btn-outline-danger" for="darkHumorNuAre">
                                                <i class="bi bi-x d-md-none"></i>
                                                <span class="d-none d-md-inline">nu are</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 col-lg-3">
                                        <div class="btn-group w-100" role="group">
                                            <input type="checkbox" class="btn-check" id="ironic">
                                            <label class="btn btn-outline-secondary" for="ironic">
                                                <i class="bi bi-chat-quote d-md-none"></i>
                                                <span class="d-none d-md-inline">ironic</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="ironicToggle" id="ironicAre" checked>
                                            <label class="btn btn-outline-success" for="ironicAre">
                                                <i class="bi bi-check d-md-none"></i>
                                                <span class="d-none d-md-inline">are</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="ironicToggle" id="ironicNuAre">
                                            <label class="btn btn-outline-danger" for="ironicNuAre">
                                                <i class="bi bi-x d-md-none"></i>
                                                <span class="d-none d-md-inline">nu are</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 col-lg-3">
                                        <div class="btn-group w-100" role="group">
                                            <input type="checkbox" class="btn-check" id="edgy">
                                            <label class="btn btn-outline-secondary" for="edgy">
                                                <i class="bi bi-lightning d-md-none"></i>
                                                <span class="d-none d-md-inline">edgy</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="edgyToggle" id="edgyAre" checked>
                                            <label class="btn btn-outline-success" for="edgyAre">
                                                <i class="bi bi-check d-md-none"></i>
                                                <span class="d-none d-md-inline">are</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="edgyToggle" id="edgyNuAre">
                                            <label class="btn btn-outline-danger" for="edgyNuAre">
                                                <i class="bi bi-x d-md-none"></i>
                                                <span class="d-none d-md-inline">nu are</span>
                                            </label>
                                        </div>
                                    </div>
                                    
                                    <div class="col-md-6 col-lg-3">
                                        <div class="btn-group w-100" role="group">
                                            <input type="checkbox" class="btn-check" id="relatable">
                                            <label class="btn btn-outline-secondary" for="relatable">
                                                <i class="bi bi-heart d-md-none"></i>
                                                <span class="d-none d-md-inline">relatable</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="relatableToggle" id="relatableAre" checked>
                                            <label class="btn btn-outline-success" for="relatableAre">
                                                <i class="bi bi-check d-md-none"></i>
                                                <span class="d-none d-md-inline">are</span>
                                            </label>
                                            
                                            <input type="radio" class="btn-check" name="relatableToggle" id="relatableNuAre">
                                            <label class="btn btn-outline-danger" for="relatableNuAre">
                                                <i class="bi bi-x d-md-none"></i>
                                                <span class="d-none d-md-inline">nu are</span>
                                            </label>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Notes and Sort -->
                        <div class="row g-3 mt-2">
                            <div class="col-md-6">
                                <div class="form-floating">
                                    <textarea class="form-control" id="notes" placeholder="Add notes about your search..." style="height: 100px"></textarea>
                                    <label for="notes">Add notes about your search...</label>
                                </div>
                            </div>
                            
                            <div class="col-md-3">
                                <label for="sortBy" class="form-label">Sort By</label>
                                <select class="form-select" id="sortBy">
                                    <option value="none">None</option>
                                    <option value="price_asc">Price: Low to High</option>
                                    <option value="price_desc">Price: High to Low</option>
                                    <option value="name_asc">Name: A to Z</option>
                                    <option value="name_desc">Name: Z to A</option>
                                </select>
                            </div>
                            
                            <div class="col-md-3">
                                <label class="form-label">Features</label>
                                <div class="btn-group-vertical w-100" role="group">
                                    <input type="checkbox" class="btn-check" id="featuredItems">
                                    <label class="btn btn-outline-info" for="featuredItems">
                                        <i class="bi bi-star d-md-none"></i>
                                        <span class="d-none d-md-inline">Featured Items</span>
                                    </label>
                                    
                                    <input type="checkbox" class="btn-check" id="inStock">
                                    <label class="btn btn-outline-success" for="inStock">
                                        <i class="bi bi-check-circle d-md-none"></i>
                                        <span class="d-none d-md-inline">In Stock</span>
                                    </label>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Action Buttons -->
                        <div class="row g-2 mt-3">
                            <div class="col-6 col-md-auto">
                                <button type="button" class="btn btn-primary w-100" id="filterProducts">
                                    <i class="bi bi-funnel"></i>
                                    <span class="d-none d-md-inline ms-1">Filter Products</span>
                                </button>
                            </div>
                            <div class="col-6 col-md-auto">
                                <button type="button" class="btn btn-info w-100" id="sortAscending">
                                    <i class="bi bi-sort-up"></i>
                                    <span class="d-none d-md-inline ms-1">Sort Ascending</span>
                                </button>
                            </div>
                            <div class="col-6 col-md-auto">
                                <button type="button" class="btn btn-warning w-100" id="sortDescending">
                                    <i class="bi bi-sort-down"></i>
                                    <span class="d-none d-md-inline ms-1">Sort Descending</span>
                                </button>
                            </div>
                            <div class="col-6 col-md-auto">
                                <button type="button" class="btn btn-success w-100" id="calculateAverage">
                                    <i class="bi bi-calculator"></i>
                                    <span class="d-none d-md-inline ms-1">Calculate Average Price</span>
                                </button>
                            </div>
                            <div class="col-12 col-md-auto">
                                <button type="button" class="btn btn-secondary w-100" id="resetFilters">
                                    <i class="bi bi-arrow-clockwise"></i>
                                    <span class="d-none d-md-inline ms-1">Reset Filters</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <!-- Products Grid -->
        <div class="row" id="productsContainer">
            <% if (products && products.length > 0) { %>
                <% products.forEach(product => { %>
                    <div class="col-sm-6 col-md-4 col-lg-3 mb-4 product-card" 
                         data-name="<%= product.name.toLowerCase() %>"
                         data-price="<%= product.price %>"
                         data-category="<%= product.category %>"
                         data-style="<%= product.style %>"
                         data-tags="<%= product.tags %>"
                         data-color="<%= product.color %>"
                         data-featured="<%= product.is_featured %>">
                        <div class="card h-100">
                            <img src="<%= product.image_path %>" class="card-img-top" alt="<%= product.name %>">
                            <div class="card-body d-flex flex-column">
                                <h5 class="card-title"><%= product.name %></h5>
                                <p class="card-text text-uppercase text-primary"><%= product.category %></p>
                                <p class="card-text flex-grow-1"><%= product.description %></p>
                                <div class="mt-auto">
                                    <p class="card-text"><strong>Price: $<%= product.price %></strong></p>
                                    <p class="card-text"><small class="text-muted">Style: <%= product.style %></small></p>
                                    <a href="/shop/<%= product.id %>" class="btn btn-primary w-100">View Details</a>
                                </div>
                            </div>
                        </div>
                    </div>
                <% }); %>
            <% } else { %>
                <div class="col-12">
                    <div class="alert alert-info text-center">
                        <h4>No products found</h4>
                        <p>Try adjusting your filters or check back later for new arrivals.</p>
                    </div>
                </div>
            <% } %>
        </div>
    </main>
    <%- include('../partials/footer') %>
    <script src="/resources/js/shop-filters.js"></script>
</body>
</html>
